<div class="properties-container">
  <!-- Header -->
  <div class="header">
    <div class="header-content">
      <h1 class="title">Propiedades</h1>
      <p class="subtitle">Gestiona todas las propiedades de renta</p>
    </div>
    <button
      class="btn btn-primary"
      (click)="startCreating()">
      <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M12 5v14M5 12h14"/>
      </svg>
      Nueva Propiedad
    </button>
  </div>

  <!-- Stats Cards -->
  <div class="stats-grid">
    <div class="stat-card">
      <div class="stat-icon available">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/>
          <polyline points="9 22 9 12 15 12 15 22"/>
        </svg>
      </div>
      <div class="stat-content">
        <p class="stat-label">Disponibles</p>
        <p class="stat-value">{{ availableCount() }}</p>
      </div>
    </div>

    <div class="stat-card">
      <div class="stat-icon rented">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/>
          <polyline points="9 22 9 12 15 12 15 22"/>
        </svg>
      </div>
      <div class="stat-content">
        <p class="stat-label">Rentadas</p>
        <p class="stat-value">{{ rentedCount() }}</p>
      </div>
    </div>

    <div class="stat-card">
      <div class="stat-icon maintenance">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"/>
        </svg>
      </div>
      <div class="stat-content">
        <p class="stat-label">Mantenimiento</p>
        <p class="stat-value">{{ maintenanceCount() }}</p>
      </div>
    </div>

    <div class="stat-card">
      <div class="stat-icon total">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <rect x="3" y="3" width="7" height="7"/>
          <rect x="14" y="3" width="7" height="7"/>
          <rect x="14" y="14" width="7" height="7"/>
          <rect x="3" y="14" width="7" height="7"/>
        </svg>
      </div>
      <div class="stat-content">
        <p class="stat-label">Total</p>
        <p class="stat-value">{{ properties().length }}</p>
      </div>
    </div>
  </div>

  <!-- Filters and Search -->
  <div class="filters-section">
    <div class="filter-buttons">
      <button
        class="filter-btn"
        [class.active]="filterStatus() === 'ALL'"
        (click)="setFilterStatus('ALL')">
        Todas
      </button>
      <button
        class="filter-btn"
        [class.active]="filterStatus() === 'DISPONIBLE'"
        (click)="setFilterStatus('DISPONIBLE')">
        Disponibles
      </button>
      <button
        class="filter-btn"
        [class.active]="filterStatus() === 'RENTADA'"
        (click)="setFilterStatus('RENTADA')">
        Rentadas
      </button>
      <button
        class="filter-btn"
        [class.active]="filterStatus() === 'MANTENIMIENTO'"
        (click)="setFilterStatus('MANTENIMIENTO')">
        Mantenimiento
      </button>
    </div>

    <div class="search-box">
      <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <circle cx="11" cy="11" r="8"/>
        <path d="m21 21-4.35-4.35"/>
      </svg>
      <input
        type="text"
        placeholder="Buscar por código, dirección o ubicación..."
        (input)="onSearchChange($event)">
    </div>
  </div>

  <!-- Properties List -->
  <div class="properties-list">
    <div *ngIf="isLoading()" class="skeleton-grid">
      <p-skeleton height="200px" *ngFor="let i of [1,2,3,4,5,6]"></p-skeleton>
    </div>

    <div *ngIf="!isLoading() && filteredProperties().length === 0" class="empty-state">
      <svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/>
        <polyline points="9 22 9 12 15 12 15 22"/>
      </svg>
      <p>No se encontraron propiedades</p>
    </div>

    <div class="properties-grid" *ngIf="!isLoading() && filteredProperties().length > 0">
      <app-property-card
        *ngFor="let property of filteredProperties()"
        [property]="property"
        (edit)="onEdit($event)"
        (delete)="onDelete($event)">
      </app-property-card>
    </div>
  </div>

  <!-- Delete Confirmation Dialog -->
  <div class="modal-overlay" *ngIf="showDeleteConfirm()" (click)="cancelDelete()">
    <div class="modal-content" (click)="$event.stopPropagation()">
      <div class="modal-header">
        <h3>Confirmar Eliminación</h3>
        <button class="btn-close" (click)="cancelDelete()">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M18 6 6 18M6 6l12 12"/>
          </svg>
        </button>
      </div>
      <div class="modal-body">
        <p>¿Estás seguro de que deseas eliminar esta propiedad?</p>
        <p class="warning-text">Esta acción no se puede deshacer.</p>
      </div>
      <div class="modal-actions">
        <button class="btn btn-secondary" (click)="cancelDelete()">
          Cancelar
        </button>
        <button class="btn btn-danger" (click)="deleteProperty()">
          Eliminar
        </button>
      </div>
    </div>
  </div>
</div>
