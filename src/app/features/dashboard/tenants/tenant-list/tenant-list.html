<div class="tenants-container">
  <!-- Header -->
  <div class="header">
    <div class="header-content">
      <h1 class="title">Inquilinos</h1>
      <p class="subtitle">Gestiona todos los inquilinos y arrendatarios</p>
    </div>
    <button
      class="btn btn-primary"
      (click)="startCreating()">
      <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M12 5v14M5 12h14"/>
      </svg>
      Nuevo Inquilino
    </button>
  </div>

  <!-- Stats Cards -->
  <div class="stats-grid">
    <div class="stat-card">
      <div class="stat-icon active">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
          <circle cx="9" cy="7" r="4"/>
          <path d="M23 21v-2a4 4 0 0 0-3-3.87"/>
          <path d="M16 3.13a4 4 0 0 1 0 7.75"/>
        </svg>
      </div>
      <div class="stat-content">
        <p class="stat-label">Activos</p>
        <p class="stat-value">{{ activeCount() }}</p>
      </div>
    </div>

    <div class="stat-card">
      <div class="stat-icon contracts">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
          <polyline points="14 2 14 8 20 8"/>
          <line x1="16" x2="8" y1="13" y2="13"/>
          <line x1="16" x2="8" y1="17" y2="17"/>
        </svg>
      </div>
      <div class="stat-content">
        <p class="stat-label">Con Contratos</p>
        <p class="stat-value">{{ withContractsCount() }}</p>
      </div>
    </div>

    <div class="stat-card">
      <div class="stat-icon occupants">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/>
          <circle cx="9" cy="7" r="4"/>
          <path d="M22 21v-2a4 4 0 0 0-3-3.87"/>
          <path d="M16 3.13a4 4 0 0 1 0 7.75"/>
        </svg>
      </div>
      <div class="stat-content">
        <p class="stat-label">Total Ocupantes</p>
        <p class="stat-value">{{ totalOccupants() }}</p>
      </div>
    </div>

    <div class="stat-card">
      <div class="stat-icon total">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
          <circle cx="9" cy="7" r="4"/>
          <path d="M23 21v-2a4 4 0 0 0-3-3.87"/>
          <path d="M16 3.13a4 4 0 0 1 0 7.75"/>
        </svg>
      </div>
      <div class="stat-content">
        <p class="stat-label">Total</p>
        <p class="stat-value">{{ tenants().length }}</p>
      </div>
    </div>
  </div>

  <!-- Filters and Search -->
  <div class="filters-section">
    <div class="search-box">
      <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <circle cx="11" cy="11" r="8"/>
        <path d="m21 21-4.35-4.35"/>
      </svg>
      <input
        type="text"
        placeholder="Buscar por nombre, teléfono o email..."
        [value]="searchTerm()"
        (input)="onSearchChange($event)">
    </div>

    <div class="filter-buttons">
      <button
        class="filter-btn"
        [class.active]="filterStatus() === 'ALL'"
        (click)="setFilterStatus('ALL')">
        Todos
      </button>
      <button
        class="filter-btn"
        [class.active]="filterStatus() === 'ACTIVE'"
        (click)="setFilterStatus('ACTIVE')">
        Activos
      </button>
      <button
        class="filter-btn"
        [class.active]="filterStatus() === 'INACTIVE'"
        (click)="setFilterStatus('INACTIVE')">
        Inactivos
      </button>
      <button
        class="filter-btn"
        [class.active]="filterStatus() === 'WITH_CONTRACTS'"
        (click)="setFilterStatus('WITH_CONTRACTS')">
        Con Contratos
      </button>
    </div>
  </div>

  <!-- Tenants List -->
  <div class="tenants-list">
    <div class="skeleton-grid" *ngIf="isLoading()">
      <p-skeleton height="250px" *ngFor="let i of [1,2,3,4,5,6]"></p-skeleton>
    </div>

    <div class="empty-state" *ngIf="!isLoading() && filteredTenants().length === 0">
      <svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
        <circle cx="9" cy="7" r="4"/>
        <path d="M23 21v-2a4 4 0 0 0-3-3.87"/>
        <path d="M16 3.13a4 4 0 0 1 0 7.75"/>
      </svg>
      <p>No se encontraron inquilinos</p>
    </div>

    <div class="tenants-grid" *ngIf="!isLoading() && filteredTenants().length > 0">
      <app-tenant-card
        *ngFor="let tenant of filteredTenants()"
        [tenant]="tenant"
        (edit)="onEdit($event)"
        (delete)="onDelete($event)">
      </app-tenant-card>
    </div>
  </div>

  <!-- Delete Confirmation Dialog -->
  <div class="modal-overlay" *ngIf="showDeleteConfirm()" (click)="cancelDelete()">
    <div class="modal-content" (click)="$event.stopPropagation()">
      <div class="modal-header">
        <h3>Confirmar Eliminación</h3>
        <button class="btn-close" (click)="cancelDelete()">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M18 6 6 18M6 6l12 12"/>
          </svg>
        </button>
      </div>
      <div class="modal-body">
        <p>¿Estás seguro de que deseas eliminar este inquilino?</p>
        <p class="warning-text">Esta acción no se puede deshacer.</p>
      </div>
      <div class="modal-actions">
        <button class="btn btn-secondary" (click)="cancelDelete()">
          Cancelar
        </button>
        <button class="btn btn-danger" (click)="deleteTenant()">
          Eliminar
        </button>
      </div>
    </div>
  </div>
</div>
